{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "Demonstration of the Lambda random string custom resource, this function is downloaded from https://github.com/sophos/cloudformation-random-string.",

  "Parameters": {
    "LambdaFunctionArn": {
      "Description": "ARN of the lambda function",
      "Type": "String"
    },
    
    "PassLength": {
      "Description": "Length of the password",
      "Default" : 8,
      "Type": "Number"
    },
    
    "Punctuation": {
      "Description": "Include punctuation or not",
      "Default" : "true",
      "Type": "String"
    },
    
    "RDSCompatible": {
      "Description": "Include punctuation or not",
      "Default" : "true",
      "Type": "String"
    }
  },

  "Resources": {
    "TestString": {
      "Type": "AWS::CloudFormation::CustomResource",
      "Properties": {
        "Length": {"Ref": "PassLength"},
        "Punctuation": {"Ref": "Punctuation"},
        "RDSCompatible": {"Ref": "RDSCompatible"},
        "ServiceToken": {"Ref": "LambdaFunctionArn"}
      }
    }
  },

  "Outputs": {
    "TheRandomString": {
      "Value": {"Fn::GetAtt": ["TestString", "RandomString"]},
      "Description": "The random string generated by Lambda"
    }
  }
}